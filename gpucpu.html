<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPU vs GPU å·¥ä½œåŸç†å¯è¦–åŒ–</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        
        /* å‹•ç•«éæ¸¡æ•ˆæœ */
        .pixel {
            transition: background-color 0.1s ease;
        }

        .cpu-core {
            transition: all 0.2s ease;
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .gpu-core {
            transition: background-color 0.3s ease;
        }

        .processing {
            background-color: #fbbf24 !important; /* Yellow-400 */
            transform: scale(1.1);
        }

        .finished {
            background-color: #4ade80 !important; /* Green-400 */
        }

        .pulse {
            animation: pulse-animation 1s infinite;
        }

        @keyframes pulse-animation {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- æ¨™é¡Œå€ -->
    <header class="text-center mb-8">
        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2">CPU vs GPU å·¥ä½œåŸç†</h1>
        <p class="text-slate-400 text-sm md:text-base">åºåˆ—è™•ç† (Sequential) vs å¹³è¡Œé‹ç®— (Parallel)</p>
    </header>

    <!-- æ§åˆ¶å€ -->
    <div class="flex gap-4 mb-8">
        <button onclick="startSimulation('cpu')" id="btn-cpu" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded-lg shadow-lg font-bold transition flex items-center gap-2">
            <span>â–¶ åŸ·è¡Œ CPU æ¨¡å¼</span>
        </button>
        <button onclick="startSimulation('gpu')" id="btn-gpu" class="bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg shadow-lg font-bold transition flex items-center gap-2">
            <span>â–¶ åŸ·è¡Œ GPU æ¨¡å¼</span>
        </button>
        <button onclick="resetAll()" class="bg-slate-700 hover:bg-slate-600 text-white px-6 py-2 rounded-lg shadow-lg font-bold transition">
            é‡ç½®
        </button>
    </div>

    <!-- ä¸»å±•ç¤ºå€ -->
    <div class="flex flex-col md:flex-row gap-8 w-full max-w-6xl">
        
        <!-- CPU å€å¡Š -->
        <div class="flex-1 bg-slate-800 rounded-xl p-6 shadow-2xl border border-slate-700 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-2 opacity-10">
                <svg width="100" height="100" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-1 9h-4v4h-2v-4H9V9h4V5h2v4h4v2z"/></svg>
            </div>
            
            <h2 class="text-2xl font-bold text-blue-400 mb-1 flex items-center gap-2">
                CPU (ä¸­å¤®è™•ç†å™¨)
            </h2>
            <p class="text-xs text-slate-400 mb-4 h-10">
                å°‘é‡çš„å¼·å¤§æ ¸å¿ƒã€‚å°±åƒä¸€ä½æ•¸å­¸æ•™æˆï¼Œèƒ½è™•ç†æ¥µå…¶è¤‡é›œçš„é‚è¼¯ï¼Œä½†ä¸€æ¬¡åªèƒ½å°ˆæ³¨åšä¸€ä»¶äº‹æƒ…ï¼ˆæˆ–å°‘æ•¸å¹¾ä»¶ï¼‰ã€‚
            </p>

            <!-- CPU æ ¸å¿ƒç¤ºæ„åœ– -->
            <div class="flex justify-center gap-4 mb-6">
                <div id="cpu-core-1" class="cpu-core w-24 h-24 bg-slate-900 border-2 border-blue-500 rounded-lg flex items-center justify-center text-blue-500 font-bold text-xl relative">
                    Core 1
                    <div class="absolute bottom-1 text-[10px] text-slate-500">Logic Master</div>
                </div>
            </div>

            <!-- CPU ä»»å‹™é€²åº¦ (å–®ç·šç¨‹æƒæ) -->
            <div class="bg-slate-900 p-2 rounded-lg border border-slate-700">
                <div class="text-xs text-center text-slate-500 mb-1">ä»»å‹™ï¼šæ¸²æŸ“ 100 å€‹åƒç´ </div>
                <div id="cpu-grid" class="grid grid-cols-10 gap-1 w-full max-w-[200px] mx-auto aspect-square">
                    <!-- JS å°‡ç”Ÿæˆ 100 å€‹ grid items -->
                </div>
            </div>
            
            <div class="mt-4 text-center">
                <span id="cpu-status" class="text-sm font-mono text-slate-300">ç‹€æ…‹: å¾…æ©Ÿ</span>
                <div class="w-full bg-slate-700 rounded-full h-2.5 mt-2">
                    <div id="cpu-progress" class="bg-blue-500 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
        </div>

        <!-- GPU å€å¡Š -->
        <div class="flex-1 bg-slate-800 rounded-xl p-6 shadow-2xl border border-slate-700 relative overflow-hidden">
            <div class="absolute top-0 right-0 p-2 opacity-10">
                <svg width="100" height="100" viewBox="0 0 24 24" fill="currentColor"><path d="M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H3V5h18v14zM8 15c0-1.66 1.34-3 3-3 .35 0 .69.07 1 .18V6h5v2h-3v7.03c-.02 1.64-1.35 2.97-3 2.97-1.66 0-3-1.34-3-3z"/></svg>
            </div>

            <h2 class="text-2xl font-bold text-purple-400 mb-1 flex items-center gap-2">
                GPU (åœ–å½¢è™•ç†å™¨)
            </h2>
            <p class="text-xs text-slate-400 mb-4 h-10">
                å¤§é‡çš„å¾®å°æ ¸å¿ƒã€‚å°±åƒä¸€åƒå€‹å°å­¸ç”Ÿï¼Œå–®äººè§£é¡Œèƒ½åŠ›ä¸å¦‚æ•™æˆï¼Œä½†å¯ä»¥ã€ŒåŒæ™‚ã€å¹«ä¸€åƒå€‹äººå¡«è‰²æˆ–åšç°¡å–®é‹ç®—ã€‚
            </p>

            <!-- GPU æ ¸å¿ƒç¤ºæ„åœ– (çŸ©é™£) -->
            <div class="flex justify-center mb-6">
                <div class="grid grid-cols-10 gap-0.5 w-24 h-24 p-1 bg-slate-900 border-2 border-purple-500 rounded-lg">
                    <!-- è£é£¾ç”¨çš„å°æ ¼å­ï¼Œä»£è¡¨è¨±å¤šæ ¸å¿ƒ -->
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                    <div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div><div class="bg-purple-900/50 w-full h-full"></div>
                </div>
            </div>

            <!-- GPU ä»»å‹™é€²åº¦ (å¹³è¡Œè™•ç†) -->
            <div class="bg-slate-900 p-2 rounded-lg border border-slate-700">
                <div class="text-xs text-center text-slate-500 mb-1">ä»»å‹™ï¼šæ¸²æŸ“ 100 å€‹åƒç´ </div>
                <div id="gpu-grid" class="grid grid-cols-10 gap-1 w-full max-w-[200px] mx-auto aspect-square">
                    <!-- JS å°‡ç”Ÿæˆ 100 å€‹ grid items -->
                </div>
            </div>

            <div class="mt-4 text-center">
                <span id="gpu-status" class="text-sm font-mono text-slate-300">ç‹€æ…‹: å¾…æ©Ÿ</span>
                <div class="w-full bg-slate-700 rounded-full h-2.5 mt-2">
                    <div id="gpu-progress" class="bg-purple-500 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
        </div>

    </div>

    <!-- çŸ¥è­˜é»ç¸½çµ -->
    <div class="mt-12 bg-slate-800 p-6 rounded-xl max-w-4xl w-full border border-slate-700">
        <h3 class="text-xl font-bold text-white mb-4">ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µç¸½çµ</h3>
        <div class="grid md:grid-cols-2 gap-6">
            <div>
                <h4 class="font-bold text-blue-400 mb-2">CPU (åºåˆ—è™•ç†)</h4>
                <ul class="list-disc list-inside text-sm text-slate-300 space-y-1">
                    <li><strong>å¼·å¤§çš„å–®æ ¸æ€§èƒ½</strong>ï¼šæ™‚è„ˆé«˜ï¼ŒæŒ‡ä»¤é›†è¤‡é›œã€‚</li>
                    <li><strong>ä½å»¶é² (Low Latency)</strong>ï¼šèƒ½å¿«é€Ÿåˆ‡æ›ä»»å‹™ï¼Œé©åˆè·‘æ“ä½œç³»çµ±ã€æ‰“é–‹ç¨‹å¼ã€‚</li>
                    <li><strong>é‚è¼¯åˆ†æ”¯</strong>ï¼šæ“…é•·è™•ç† "å¦‚æœ...é‚£éº¼..." (If-Else) çš„è¤‡é›œåˆ¤æ–·ã€‚</li>
                    <li><strong>å¼±é»</strong>ï¼šé¢å°æµ·é‡ä¸”é‡è¤‡çš„ç°¡å–®æ•¸æ“šï¼ˆå¦‚è¢å¹•ä¸Šçš„å¹¾ç™¾è¬å€‹åƒç´ ï¼‰ï¼Œé€ä¸€è™•ç†æ•ˆç‡å¤ªä½ã€‚</li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold text-purple-400 mb-2">GPU (å¹³è¡Œè™•ç†)</h4>
                <ul class="list-disc list-inside text-sm text-slate-300 space-y-1">
                    <li><strong>æµ·é‡çš„å°æ ¸å¿ƒ</strong>ï¼šæ™‚è„ˆè¼ƒä½ï¼ŒæŒ‡ä»¤é›†ç°¡å–®ã€‚</li>
                    <li><strong>é«˜ååé‡ (High Throughput)</strong>ï¼šå¯ä»¥åŒæ™‚è™•ç†å¤§é‡æ•¸æ“šã€‚</li>
                    <li><strong>SIMD æ¶æ§‹</strong>ï¼šå–®æŒ‡ä»¤å¤šæ•¸æ“šæµï¼ˆSingle Instruction, Multiple Dataï¼‰ï¼Œä¸€å€‹å‘½ä»¤å«æ‰€æœ‰æ ¸å¿ƒåšä¸€æ¨£çš„äº‹ã€‚</li>
                    <li><strong>æ‡‰ç”¨</strong>ï¼šåœ–å½¢æ¸²æŸ“ã€æ·±åº¦å­¸ç¿’ã€çŸ©é™£é‹ç®—ã€‚</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ– Grid
        const gridSize = 100; // 10x10
        const cpuGrid = document.getElementById('cpu-grid');
        const gpuGrid = document.getElementById('gpu-grid');
        let isRunning = false;

        function initGrid(element, type) {
            element.innerHTML = '';
            for (let i = 0; i < gridSize; i++) {
                const div = document.createElement('div');
                div.className = `w-full h-full bg-slate-600 rounded-sm pixel ${type}-pixel-${i}`;
                element.appendChild(div);
            }
        }

        initGrid(cpuGrid, 'cpu');
        initGrid(gpuGrid, 'gpu');

        // CPU æ¨¡æ“¬é‚è¼¯
        async function runCPU() {
            const statusEl = document.getElementById('cpu-status');
            const progressEl = document.getElementById('cpu-progress');
            const core = document.getElementById('cpu-core-1');
            
            statusEl.innerText = "ç‹€æ…‹: æ­£åœ¨è¨ˆç®—é‚è¼¯èˆ‡æ¸²æŸ“...";
            statusEl.className = "text-sm font-mono text-blue-400 animate-pulse";
            
            // æ ¸å¿ƒç™¼å…‰
            core.classList.add('bg-blue-900', 'text-white', 'scale-105');
            core.style.boxShadow = "0 0 20px #3b82f6";

            const pixels = document.querySelectorAll('[class*="cpu-pixel-"]');
            
            // CPU æ˜¯ä¸€æ­¥ä¸€æ­¥åšçš„ (Sequential)
            // ç‚ºäº†è¦–è¦ºæ•ˆæœï¼Œæˆ‘å€‘è®“å®ƒå¾ˆå¿«ï¼Œä½†ä»ç„¶æ˜¯è‚‰çœ¼å¯è¦‹çš„é †åº
            for (let i = 0; i < pixels.length; i++) {
                if (!isRunning) break; // ä¸­æ–·æª¢æŸ¥

                // æ¨¡æ“¬è™•ç†ä¸­ (è®Šé»ƒ)
                pixels[i].classList.remove('bg-slate-600');
                pixels[i].classList.add('processing');
                
                // æ¨¡æ“¬é‹ç®—æ™‚é–“ (CPU å–®æ ¸å¾ˆå¿«ï¼Œæ‰€ä»¥é€™è£¡å»¶é²å¾ˆçŸ­)
                await new Promise(r => setTimeout(r, 20)); 

                // æ¨¡æ“¬å®Œæˆ (è®Šç¶ )
                pixels[i].classList.remove('processing');
                pixels[i].classList.add('finished');

                // æ›´æ–°é€²åº¦æ¢
                progressEl.style.width = `${((i + 1) / gridSize) * 100}%`;
            }

            // å®Œæˆ
            if (isRunning) {
                statusEl.innerText = "ç‹€æ…‹: ä»»å‹™å®Œæˆ";
                statusEl.className = "text-sm font-mono text-green-400";
                core.classList.remove('bg-blue-900', 'text-white', 'scale-105');
                core.style.boxShadow = "";
            }
        }

        // GPU æ¨¡æ“¬é‚è¼¯
        async function runGPU() {
            const statusEl = document.getElementById('gpu-status');
            const progressEl = document.getElementById('gpu-progress');
            const pixels = document.querySelectorAll('[class*="gpu-pixel-"]');
            
            statusEl.innerText = "ç‹€æ…‹: è¼‰å…¥æ•¸æ“šè‡³ VRAM...";
            statusEl.className = "text-sm font-mono text-purple-400 animate-pulse";
            
            // æ¨¡æ“¬ä¸€é»é»å»¶é² (å•Ÿå‹•é–‹éŠ·)
            await new Promise(r => setTimeout(r, 600));

            if (!isRunning) return;

            statusEl.innerText = "ç‹€æ…‹: å¹³è¡Œé‹ç®—ä¸­ (æ‰€æœ‰æ ¸å¿ƒåŒæ™‚å·¥ä½œ)";
            
            // GPU æ˜¯åŒæ™‚åšçš„ (Parallel)
            // 1. å…¨éƒ¨è®Šé»ƒ (è™•ç†ä¸­)
            pixels.forEach(p => {
                p.classList.remove('bg-slate-600');
                p.classList.add('processing');
            });

            // æ¨¡æ“¬é‹ç®—æ™‚é–“ (GPU å–®æ ¸è¼ƒæ…¢ï¼Œä¸”è¦åŒæ­¥ï¼Œæ‰€ä»¥ç­‰å¾…æ™‚é–“æ¯” CPU å–®æ¬¡æ“ä½œé•·ï¼Œä½†ç¸½é«”å¿«)
            await new Promise(r => setTimeout(r, 1500)); 

            if (!isRunning) return;

            // 2. å…¨éƒ¨è®Šç¶  (å®Œæˆ)
            pixels.forEach(p => {
                p.classList.remove('processing');
                p.classList.add('finished');
            });
            
            progressEl.style.width = "100%";
            statusEl.innerText = "ç‹€æ…‹: å¹€ç·©è¡è¼¸å‡ºå®Œæˆ";
            statusEl.className = "text-sm font-mono text-green-400";
        }

        async function startSimulation(type) {
            if (isRunning) return; // é˜²æ­¢é‡è¤‡é»æ“Š
            isRunning = true;
            
            // é–å®šæŒ‰éˆ•
            document.getElementById('btn-cpu').disabled = true;
            document.getElementById('btn-gpu').disabled = true;
            document.getElementById('btn-cpu').classList.add('opacity-50');
            document.getElementById('btn-gpu').classList.add('opacity-50');

            if (type === 'cpu') {
                await runCPU();
            } else {
                await runGPU();
            }

            isRunning = false;
            // è§£é–æŒ‰éˆ• (å¦‚æœä¸é‡ç½®ï¼Œå…è¨±å†æ¬¡é‹è¡Œæœƒæ¯”è¼ƒæ€ªï¼Œä½†ç‚ºäº†ç°¡å–®UIï¼Œæˆ‘å€‘åªåœ¨çµæŸå¾Œè§£é–é‡ç½®æŒ‰éˆ•é‚è¼¯)
            // é€™è£¡é¸æ“‡è®“ç”¨æˆ¶æ‰‹å‹•é‡ç½®æ¯”è¼ƒå¥½
        }

        function resetAll() {
            isRunning = false; // å¼·åˆ¶åœæ­¢å¾ªç’°
            
            // é‡ç½® UI ç‹€æ…‹
            document.getElementById('cpu-status').innerText = "ç‹€æ…‹: å¾…æ©Ÿ";
            document.getElementById('cpu-status').className = "text-sm font-mono text-slate-300";
            document.getElementById('cpu-progress').style.width = "0%";
            
            document.getElementById('gpu-status').innerText = "ç‹€æ…‹: å¾…æ©Ÿ";
            document.getElementById('gpu-status').className = "text-sm font-mono text-slate-300";
            document.getElementById('gpu-progress').style.width = "0%";

            // é‡ç½® Grid
            initGrid(cpuGrid, 'cpu');
            initGrid(gpuGrid, 'gpu');

            // é‡ç½® CPU æ ¸å¿ƒæ¨£å¼
            const core = document.getElementById('cpu-core-1');
            core.classList.remove('bg-blue-900', 'text-white', 'scale-105');
            core.style.boxShadow = "";

            // è§£é–æŒ‰éˆ•
            document.getElementById('btn-cpu').disabled = false;
            document.getElementById('btn-gpu').disabled = false;
            document.getElementById('btn-cpu').classList.remove('opacity-50');
            document.getElementById('btn-gpu').classList.remove('opacity-50');
        }

    </script>
</body>
</html>